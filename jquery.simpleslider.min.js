(function(h){h.fn.simpleslider=function(l){var w="ontouchstart"in window,b=h.extend({min:0,max:100,value:0,orientaion:f,box_class:"",track_class:"",handle_class:"",box_disable_class:"",track_disable_class:"",handle_disable_class:"",size:[0,0],change:function(){}},l),s="vertical",f="horizontal",p="simpleslider_value",f={create:function(){return this.each(function(f){function l(g){g=Math.max(Math.min(g,b.max),b.min);g!=a.data(p)&&(a.data(p,g),b.change(g))}function x(){var g=a.data(p),c;b.orientation==
s?(c=m/q*g-t/2,g=n/2-u/2):(c=m/2-t/2,g=n/q*g-u/2);d.css("top",c+"px");d.css("left",g+"px")}function y(a){return"touchmove"==a.type||"touchstart"==a.type?(a=a.originalEvent.changedTouches[0],{x:a.clientX,y:a.clientY}):"mousedown"==a.type||"mousemove"==a.type?{x:a.pageX,y:a.pageY}:{x:-1,y:-1}}function e(c){c.preventDefault();c.stopPropagation();switch(c.type){case "touchstart":case "mousedown":if(0<=k)break;(function(){var a=y(c);k=a.x;r=a.y})();break;case "touchmove":case "mousemove":if(0>k)break;
(function(){var d=y(c),e=d.x-k,f=d.y-r;k=d.x;r=d.y;d=a.data(p);diff_val=b.orientation==s?q/m*f:q/n*e;l(d+diff_val);x()})();break;case "touchend":case "mouseup":case "mouseout":if(0>k)break;r=k=-1}}var a=h(this),k=-1,r=-1,q=b.max-b.min;a.addClass(b.box_class);var d=h(document.createElement("div"));d.data("ss_role","handle");d.addClass(b.handle_class);var c=h(document.createElement("div"));c.data("ss_role","track");c.addClass(b.track_class);c.append(d);a.append(c);f=a.innerWidth();var v=a.innerHeight(),
u=d.outerWidth(),t=d.outerHeight(),n=c.width(),m=c.height();0<b.size[0]&&0<b.size[1]&&(f=b.size[0],v=b.size[1],a.width(f),a.height(v),b.orientation==s?(m=v-t,c.height(m)):(n=f-u,c.width(n)),c.css("left",(a.innerWidth()-c.outerWidth())/2+"px"),c.css("top",(a.innerHeight()-c.outerHeight())/2+"px"));a.bind("_enable",function(){!1==a.data("simpleslider_enable")&&(w?(d.bind("touchstart",e),a.bind("touchmove",e),a.bind("touchend",e)):(d.bind("mousedown",e),a.bind("mousemove",e),a.bind("mouseup",e)));a.data("simpleslider_enable",
!0);a.removeClass(b.box_disable_class);d.removeClass(b.handle_disable_class);c.removeClass(b.track_disable_class);a.addClass(b.box_class);d.addClass(b.handle_class);c.addClass(b.track_class)});a.bind("_disable",function(){!0==a.data("simpleslider_enable")&&(w?(d.unbind("touchstart",e),a.unbind("touchmove",e),a.unbind("touchend",e)):(d.unbind("mousedown",e),a.unbind("mousemove",e),a.unbind("mouseup",e)),a.removeClass(b.box_class),d.removeClass(b.handle_class),c.removeClass(b.track_class),a.addClass(b.box_disable_class),
d.addClass(b.handle_disable_class),c.addClass(b.track_disable_class));a.data("simpleslider_enable",!1)});l(b.value);x();a.data("simpleslider_enable",!1);a.trigger("_enable")})},get_val:function(){h(this).data("as_value")},enable:function(){h(this).trigger("_enable")},disable:function(){h(this).trigger("_disable")}};return f[l]?f[l].apply(this,Array.prototype.slice.call(arguments,1)):f.create.apply(this)}})(jQuery);
