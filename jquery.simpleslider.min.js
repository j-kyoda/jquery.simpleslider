(function(g){g.fn.simpleslider=function(l){var C="ontouchstart"in window,d=g.extend({min:0,max:100,step:0,value:0,orientaion:k,box_class:"",track_class:"",handle_class:"",box_disable_class:"",track_disable_class:"",handle_disable_class:"",size:[0,0],change:function(){}},l),r="vertical",k="horizontal",s="simpleslider_value",t="simpleslider_step_value",k={create:function(){return this.each(function(u){function k(b){return Math.max(Math.min(b,d.max),d.min)}function v(b){b=k(b);if(b!=a.data(s)){a.data(s,
b);var h=b;d.step?(h=k(parseInt((b+d.step/2)/d.step)*d.step),h!=a.data(t)&&(a.data(t,h),d.change(h))):(a.data(t,h),d.change(h))}}function w(b){var h=a.data(s),c;d.orientation==r?(c=n/p*h-z/2,h=q/2-A/2):(c=n/2-z/2,h=q/p*h-A/2);c={top:c+"px",left:h+"px"};!0==b?e.animate(c,400):e.css(c)}function l(b){return"touchmove"==b.type||"touchstart"==b.type?(b=b.originalEvent.changedTouches[0],{x:b.clientX,y:b.clientY}):"mousedown"==b.type||"mousemove"==b.type||"click"==b.type?{x:b.pageX,y:b.pageY}:{x:-1,y:-1}}
function x(b){b.preventDefault();b.stopPropagation();switch(b.type){case "click":if(b.target!=b.currentTarget)break;b=l(b);var a=c.offset(),e=0,e=d.orientation==r?(b.y-a.top)/n*p:(b.x-a.left)/q*p;v(e);w(!0)}}function f(b){b.preventDefault();b.stopPropagation();switch(b.type){case "touchstart":case "mousedown":if(0<=m)break;(function(){var a=l(b);m=a.x;y=a.y})();break;case "touchmove":case "mousemove":if(0>m)break;(function(){var c=l(b),e=c.x-m,f=c.y-y;m=c.x;y=c.y;var c=a.data(s),g=0,g=d.orientation==
r?p/n*f:p/q*e;v(c+g);w()})();break;case "touchend":case "mouseup":case "mouseout":if(0>m)break;y=m=-1}}var a=g(this),m=-1,y=-1,p=d.max-d.min;a.addClass(d.box_class);var e=g(document.createElement("div"));e.data("ss_role","handle");e.addClass(d.handle_class);var c=g(document.createElement("div"));c.data("ss_role","track");c.addClass(d.track_class);c.append(e);a.append(c);u=a.innerWidth();var B=a.innerHeight(),A=e.outerWidth(),z=e.outerHeight(),q=c.width(),n=c.height();0<d.size[0]&&0<d.size[1]&&(u=
d.size[0],B=d.size[1],a.width(u),a.height(B),d.orientation==r?(n=B-z,c.height(n)):(q=u-A,c.width(q)),c.css("left",(a.innerWidth()-c.outerWidth())/2+"px"),c.css("top",(a.innerHeight()-c.outerHeight())/2+"px"));a.bind("_setval",function(a,c){v(c);w(!0)});a.bind("_enable",function(){!1==a.data("simpleslider_enable")&&(C?(c.bind("click",x),e.bind("touchstart",f),a.bind("touchmove",f),a.bind("touchend",f)):(c.bind("click",x),e.bind("mousedown",f),a.bind("mousemove",f),a.bind("mouseup",f)));a.data("simpleslider_enable",
!0);a.removeClass(d.box_disable_class);e.removeClass(d.handle_disable_class);c.removeClass(d.track_disable_class);a.addClass(d.box_class);e.addClass(d.handle_class);c.addClass(d.track_class)});a.bind("_disable",function(){!0==a.data("simpleslider_enable")&&(C?(c.unbind("click",x),e.unbind("touchstart",f),a.unbind("touchmove",f),a.unbind("touchend",f)):(c.unbind("click",x),e.unbind("mousedown",f),a.unbind("mousemove",f),a.unbind("mouseup",f)),a.removeClass(d.box_class),e.removeClass(d.handle_class),
c.removeClass(d.track_class),a.addClass(d.box_disable_class),e.addClass(d.handle_disable_class),c.addClass(d.track_disable_class));a.data("simpleslider_enable",!1)});v(d.value);w();a.data("simpleslider_enable",!1);a.trigger("_enable")})},get_val:function(){return g(this).data(t)},set_val:function(d){g(this).trigger("_setval",d)},enable:function(){g(this).trigger("_enable")},disable:function(){g(this).trigger("_disable")}};return k[l]?k[l].apply(this,Array.prototype.slice.call(arguments,1)):k.create.apply(this)}})(jQuery);
